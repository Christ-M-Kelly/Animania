{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/moaye_kelly/WebstormProjects/Animania/app/formulaire_inscription/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Link from \"next/link\";\n\nexport default function Formulaire() {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    passwordConfirmation: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (formData.password !== formData.passwordConfirmation) {\n      setError(\"Les mots de passe ne correspondent pas.\");\n      return;\n    }\n\n    if (formData.password.length < 6) {\n      setError(\"Le mot de passe doit contenir au moins 6 caract√®res.\");\n      return;\n    }\n\n    if (!formData.name.trim()) {\n      setError(\"Le nom est requis.\");\n      return;\n    }\n\n    setIsLoading(true);\n    setError(\"\");\n\n    try {\n      console.log(\"Envoi des donn√©es:\", {\n        name: formData.name.trim(),\n        email: formData.email.trim(),\n        password: \"***\",\n        role: \"USER\",\n      });\n\n      const response = await fetch(\"/api/users\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          name: formData.name.trim(),\n          email: formData.email.trim(),\n          password: formData.password,\n          role: \"USER\",\n        }),\n      });\n\n      console.log(\"üì° Statut de la r√©ponse:\", response.status);\n      console.log(\"üì° Headers de la r√©ponse:\", response.headers);\n\n      const result = await response.json();\n      console.log(\"üì¶ Donn√©es re√ßues:\", result);\n\n      if (!response.ok) {\n        console.error(\"Erreur de l'API:\", result);\n        throw new Error(result.error || `Erreur HTTP: ${response.status}`);\n      }\n\n      console.log(\"R√©sultat de la cr√©ation de l'utilisateur:\", result);\n\n      setSuccess(`Bienvenue ${result.user.name} !`);\n\n      // R√©initialiser le formulaire\n      setFormData({\n        name: \"\",\n        email: \"\",\n        password: \"\",\n        passwordConfirmation: \"\",\n      });\n\n      setTimeout(() => {\n        window.location.href = \"/connexion\";\n      }, 2000);\n    } catch (error) {\n      console.error(\"Erreur lors de la soumission :\", error);\n      const message =\n        (error as Error).message || \"Erreur lors de l'envoi des donn√©es.\";\n      setError(message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\n  ) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n    // R√©initialiser les messages d'erreur\n    if (error) setError(\"\");\n    if (success) setSuccess(\"\");\n  };\n\n  return (\n    <div>\n      <main className=\"relative flex min-h-screen flex-col items-center justify-center py-12\">\n        <video\n          src=\"https://videos.pexels.com/video-files/856354/856354-hd_1920_1080_25fps.mp4\"\n          autoPlay\n          muted\n          loop\n          className=\"fixed left-0 top-0 z-[-1] size-full object-cover\"\n        />\n        <div className=\"fixed left-0 top-0 z-[-1] size-full bg-gradient-to-b from-black/80 via-black/60 to-amber-900/40\" />\n\n        <div className=\"relative z-10 w-[90%] max-w-md rounded-3xl border border-amber-200/20 bg-white/10 p-6 shadow-2xl backdrop-blur-md md:p-10\">\n          <h2 className=\"mb-6 text-center text-2xl font-bold text-amber-100 md:mb-8 md:text-3xl\">\n            Cr√©er un compte\n          </h2>\n\n          {/* Messages d'erreur et de succ√®s */}\n          {error && (\n            <div className=\"mb-4 rounded-xl border border-red-400/50 bg-red-500/20 p-3 text-red-200 backdrop-blur-sm\">\n              {error}\n            </div>\n          )}\n\n          {success && (\n            <div className=\"mb-4 rounded-xl border border-green-400/50 bg-green-500/20 p-3 text-green-200 backdrop-blur-sm\">\n              {success}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            <div>\n              <label\n                htmlFor=\"name\"\n                className=\"mb-1.5 block text-sm font-medium text-amber-200\"\n              >\n                Nom\n              </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                placeholder=\"Votre nom\"\n                required\n                className=\"mt-1 block w-full rounded-xl border border-amber-200/20 bg-white/10 px-3 py-2.5 text-sm text-amber-100 transition-all duration-200 placeholder:text-amber-300/50 focus:border-amber-400 focus:ring-2 focus:ring-amber-300/40\"\n              />\n            </div>\n            <div>\n              <label\n                htmlFor=\"email\"\n                className=\"mb-1.5 block text-sm font-medium text-amber-200\"\n              >\n                Email\n              </label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n                placeholder=\"votre@email.com\"\n                required\n                className=\"mt-1 block w-full rounded-xl border border-amber-200/20 bg-white/10 px-3 py-2.5 text-sm text-amber-100 transition-all duration-200 placeholder:text-amber-300/50 focus:border-amber-400 focus:ring-2 focus:ring-amber-300/40\"\n              />\n            </div>\n            <div>\n              <label\n                htmlFor=\"password\"\n                className=\"mb-1.5 block text-sm font-medium text-amber-200\"\n              >\n                Mot de passe\n              </label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                required\n                className=\"mt-1 block w-full rounded-xl border border-amber-200/20 bg-white/10 px-3 py-2.5 text-sm text-amber-100 transition-all duration-200 placeholder:text-amber-300/50 focus:border-amber-400 focus:ring-2 focus:ring-amber-300/40\"\n              />\n            </div>\n            <div>\n              <label\n                htmlFor=\"passwordConfirmation\"\n                className=\"mb-1.5 block text-sm font-medium text-amber-200\"\n              >\n                Confirmer le mot de passe\n              </label>\n              <input\n                type=\"password\"\n                id=\"passwordConfirmation\"\n                name=\"passwordConfirmation\"\n                value={formData.passwordConfirmation}\n                onChange={handleChange}\n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                required\n                className=\"mt-1 block w-full rounded-xl border border-amber-200/20 bg-white/10 px-3 py-2.5 text-sm text-amber-100 transition-all duration-200 placeholder:text-amber-300/50 focus:border-amber-400 focus:ring-2 focus:ring-amber-300/40\"\n              />\n            </div>\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"mt-6 w-full rounded-xl bg-gradient-to-r from-amber-500 to-amber-700 py-2.5 text-sm font-medium text-white transition-all duration-200 hover:scale-[1.02] hover:from-amber-600 hover:to-amber-800 disabled:transform-none disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center justify-center\">\n                  <div className=\"mr-2 size-4 animate-spin rounded-full border-b-2 border-white\"></div>\n                  Inscription...\n                </div>\n              ) : (\n                \"S'inscrire\"\n              )}\n            </button>\n          </form>\n        </div>\n\n        <div className=\"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/95 via-amber-950/40 to-transparent backdrop-blur-sm\">\n          <div className=\"container mx-auto p-8\">\n            <div className=\"flex flex-col items-center justify-between space-y-6 border-t border-amber-100/10 pt-6 md:flex-row md:space-y-0\">\n              <div className=\"flex items-center space-x-6 md:pl-4\">\n                <Link\n                  href=\"/\"\n                  className=\"text-sm text-amber-100 transition-colors duration-200 hover:scale-105 hover:text-white\"\n                >\n                  Accueil\n                </Link>\n                <span className=\"text-amber-100/30\">‚Ä¢</span>\n                <Link\n                  href=\"/connexion\"\n                  className=\"text-sm text-amber-100 transition-colors duration-200 hover:scale-105 hover:text-white\"\n                >\n                  Connexion\n                </Link>\n              </div>\n              <div className=\"flex flex-1 justify-center\">\n                <div className=\"flex items-center space-x-10\">\n                  <a\n                    href=\"#\"\n                    className=\"text-amber-100 transition-all duration-200 hover:rotate-6 hover:scale-110 hover:text-white\"\n                    aria-label=\"Facebook\"\n                  >\n                    <svg\n                      className=\"size-5\"\n                      fill=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\n                    </svg>\n                  </a>\n                  <a\n                    href=\"#\"\n                    className=\"text-amber-100 transition-all duration-200 hover:-rotate-6 hover:scale-110 hover:text-white\"\n                    aria-label=\"Twitter\"\n                  >\n                    <svg\n                      className=\"size-5\"\n                      fill=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path d=\"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z\" />\n                    </svg>\n                  </a>\n                  <a\n                    href=\"#\"\n                    className=\"text-amber-100 transition-all duration-200 hover:rotate-6 hover:scale-110 hover:text-white\"\n                    aria-label=\"Instagram\"\n                  >\n                    <svg\n                      className=\"size-5\"\n                      fill=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path d=\"M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987 6.62 0 11.987-5.367 11.987-11.987C24.014 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.708 13.744 3.708 12.447s.49-2.448 1.418-3.323C6.001 8.198 7.152 7.708 8.449 7.708s2.448.49 3.323 1.416c.875.926 1.365 2.077 1.365 3.374s-.49 2.448-1.365 3.323c-.875.807-2.026 1.167-3.323 1.167zm7.718 0c-1.297 0-2.448-.49-3.323-1.297-.875-.926-1.365-2.077-1.365-3.374s.49-2.448 1.365-3.323c.875-.926 2.026-1.416 3.323-1.416s2.448.49 3.323 1.416c.875.926 1.365 2.077 1.365 3.374s-.49 2.448-1.365 3.323c-.875.807-2.026 1.167-3.323 1.167z\" />\n                    </svg>\n                  </a>\n                </div>\n              </div>\n              <div className=\"text-sm font-light tracking-wider text-amber-100/80 md:pr-4\">\n                ¬© 2024 Animania. Tous droits r√©serv√©s.\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}